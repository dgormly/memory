<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- editor_new - using bootstrap4 -->
    <meta name="viewport" content="width=device-width"/>

    <!-- csrf goodies -->
    <script>
        //const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        const csrftoken = getCookie('csrftoken');
    </script>
    <!-- end csrf goodies -->
    <script>
        //const numRequired = 32; // The number of images required to be uploaded for the user to be able to select next.
        //const numRequired = {{ num_required }}; // The number of images required to be uploaded for the user to be able to select next.
        //var = numimages = 32;
    </script>
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
    crossorigin="anonymous"
  />
<script
src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
crossorigin="anonymous"
></script>
<script
src="https://code.jquery.com/jquery-3.5.1.min.js"
integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
crossorigin="anonymous"
></script>
    <link rel="stylesheet" href="/static/node/croppie/croppie.css"/>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <!--<script src="/static/node/vue-spinner/dist/vue-spinner.min.js"></script>-->
    <script src="/static/node/vue-spinner/dist/vue-spinner.js"></script>
    <script src="/static/node/croppie/croppie.js"></script>
    <link rel="stylesheet" href="/static/css/editor.css"/>
</head>
<body class="bg-light">
    <div id="editorApp">
      <top-nav @upload-photo="cropPhoto" @cancel-photo="cancelImage" :title="this.titleText" :editing="this.mode" :numimages="Object.keys(this.croppedImages).length" :numrequired="this.numRequired"></top-nav>
      <div v-bind:class="{ view: this.mode == 'CROP' }" id="editor">
        <img id="viewer" width="300" height="auto" />
        <div id="uploadMsg" v-bind:class="{ hide: Object.keys(this.croppedImages).length != 0 }"></div>
      </div>
      <card-display @delete-image="deleteImage" v-bind:class="{ hide: this.mode == 'CROP' }" :cards="this.croppedImages" :mode="this.mode" @background-selected="bgSelected"></card-display>
    <bottom-nav :editing="this.mode" @save-crop="addImage" @clear-photos="clearPhotos" @next-screen="nextPressed" ></bottom-nav>
    </div>
<script type="text/javascript" src="/static/js/manager.js"></script>
<script type="text/javascript" src="/static/js/editor.js"></script>
</body>
</html>
